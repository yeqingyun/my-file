<!DOCTYPE html>
<html>
<head>
    <base href="${base}"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>文件上传</title>
    <link rel="stylesheet" type="text/css" href="css/webuploader.css"/>
    <link rel="stylesheet" type="text/css" href="css/fileupload.css"/>
    <link href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/webuploader.js"></script>
    <script type="text/javascript" src="js/fileupload.js"></script>
</head>
<body>
<div id="uploader" class="wu-example">
    <div>
        <a href="http://www.adobe.com/go/getflashplayer" target="_blank" border="0">更新flash</a>
    </div>
    <!--用来存放文件信息-->
    <div id="fileList" class="uploader-list"></div>
    <div class="btns">
        <div id="filePicker">选择文件</div>
        <button id="ctlBtn" class="btn btn-default">开始上传</button>
    </div>
</div>
</body>
<script type="text/javascript">

    function uploadSuccess() {
        $('#ctlBtn').attr("onclick", "start()");
        $('#ctlBtn').text("继续上传");
    }
    /**
     * 参数解析
     * swfUrl, //flash 插件地址，用于支持ie10以下浏览器
     * hostUrl, //服务地址 ${base}
     * filePickerDiv, //文件选择按钮 div节点
     * fileListDiv,    //文件列表div节点
     * isMultiple,    //是否是文件多选    默认为多选 选用
     * chunkSize,    //文件分片大小    默认文10M    选用
     * updateProgressCallback, //文件上传进度条函数，可以配置更好的进度条 进度条可以自己画，由这个去画     选用
     * uploadAllFunc    , //文件 都已经上传完毕后的回调函数   选用
     */
    GnifFileUpload.init(
        "${base}js/Uploader.swf",
        "${base}",
        "filePicker",
        "fileList",
        true,
        10 * 1024 * 1024,
        null,
        uploadSuccess
    );


    function stop() {
        GnifFileUpload.stop();
        $('#ctlBtn').attr("onclick", "start()");
        $('#ctlBtn').text("继续上传");
    }

    function start() {
        GnifFileUpload.start();
        $('#ctlBtn').attr("onclick", "stop()");
        $('#ctlBtn').text("取消上传");
    }


    $(function () {
        $('#ctlBtn').attr("onclick", "start()");
        $('#ctlBtn').text("开始上传");
    });


</script>
</html>